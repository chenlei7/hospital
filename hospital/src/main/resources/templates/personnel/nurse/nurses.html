<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>ProClinic-医院管理系统Bootstrap4前端框架</title>
	<!-- Fav  Icon Link -->
	<link rel="shortcut icon" type="image/png" th:href="@{/images/fav.png}">
	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
	<!-- themify icons CSS -->
	<link rel="stylesheet" th:href="@{/css/themify-icons.css}">
	<!-- Animations CSS -->
	<link rel="stylesheet" th:href="@{/css/animate.css}">
	<!-- Main CSS -->
	<link rel="stylesheet" th:href="@{/css/styles.css}">
	<link rel="stylesheet" th:href="@{/css/green.css}" id="style_theme">
	<link rel="stylesheet" th:href="@{/css/responsive.css}">
	<!-- morris charts -->
	<link rel="stylesheet" th:href="@{/charts/css/morris.css}">
	<!-- jvectormap -->
	<link rel="stylesheet" th:href="@{/css/jquery-jvectormap.css}">
	<link rel="stylesheet" th:href="@{/datatable/dataTables.bootstrap4.min.css}">

	<script th:src="@{/js/modernizr.min.js}"></script>
</head>

<body>
<!-- Pre Loader -->
<div class="loading">
	<div class="spinner">
		<div class="double-bounce1"></div>
		<div class="double-bounce2"></div>
	</div>
</div>
<!--/Pre Loader -->

<div class="wrapper">
	<!-- Page Content -->
	<div id="content">
		<!-- Top Navigation -->
		<div class="container top-brand">
			<nav class="navbar navbar-default">
				<div class="navbar-header">
					<div class="sidebar-header"> <a href="/personnel/index"><img th:src="@{/images/logo-dark.png}" class="logo" alt="logo"></a>
					</div>
				</div>
				<ul class="nav justify-content-end">
					<li class="nav-item">
						<a class="nav-link">
							<span title="Fullscreen" class="ti-fullscreen fullscreen"></span>
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
						   aria-expanded="false">
							<span class="ti-user"></span>
						</a>
						<div class="dropdown-menu lochana-box-shadow2 profile animated flipInY">
							<h5>这里显示登录进来的人的名字</h5>

							<a class="dropdown-item" href="/login">
								<span class="ti-power-off"></span> 退出</a>
						</div>
					</li>
				</ul>
			</nav>
		</div>
		<!-- /Top Navigation -->
		<!-- Menu -->
		<div class="container menu-nav">
			<nav class="navbar navbar-expand-lg lochana-bg text-white">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
						aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="ti-menu text-white"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item dropdown active">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
							   aria-expanded="false"><span class="ti-home"></span> 医院首页</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/personnel/index">首页</a>
							</div>
						</li>
						<!--医生管理-->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
							   aria-expanded="false"><span class="ti-user"></span> 医生管理</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/personnel/addDoctor">添加医生信息</a>
								<a class="dropdown-item" href="/doctor/doctors">查询医生信息</a>
								<a class="dropdown-item" href="/doctor/doctorInfo">医生信息详情</a>
								<a class="dropdown-item" href="/personnel/editDoctor">编辑医生信息</a>
							</div>
						</li>
						<!--护士管理-->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
							   aria-expanded="false"><span class="ti-user"></span> 护士管理</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/personnel/addNurse">添加护士信息</a>
								<a class="dropdown-item" href="/nurse/nurses">查询护士信息</a>
								<a class="dropdown-item" href="/nurse/nurseInfo">护士信息详情</a>
								<a class="dropdown-item" href="/personnel/editNurse">编辑护士信息</a>
							</div>
						</li>
						<!--员工管理-->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
							   aria-expanded="false"><span class="ti-user"></span> 员工管理</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/personnel/addOther">添加员工信息</a>
								<a class="dropdown-item" href="/other/others">查询员工信息</a>
								<a class="dropdown-item" href="/other/otherInfo">员工信息详情</a>
								<a class="dropdown-item" href="/personnel/editOther">编辑员工信息</a>
							</div>
						</li>
						<!--考勤管理-->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
							   aria-expanded="false"><span class="ti-user"></span> 考勤管理</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/attendance/goAttendance">考勤记录</a>
								<a class="dropdown-item" href="/attendance/allAttendance">考勤查询</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>
		</div>
		<!-- /Menu -->
		<!-- Breadcrumb -->
		<!-- Page Title -->
		<div class="container mt-0">
			<div class="row breadcrumb-bar">
				<div class="col-md-6">
					<h3 class="block-title">护士 All</h3>
				</div>
				<div class="col-md-6">
					<ol class="breadcrumb">
						<li class="breadcrumb-item">
							<a href="/personnel/index">
								<span class="ti-home"></span>
							</a>
						</li>
						<li class="breadcrumb-item">护士 </li>
						<li class="breadcrumb-item active">护士 All</li>
					</ol>
				</div>
			</div>
		</div>
		<!-- /Page Title -->

		<!-- /Breadcrumb -->
		<!-- Main Content -->
		<div class="container">

			<div class="row">
				<!-- Widget Item -->
				<div class="col-md-12">
					<div class="widget-area-2 lochana-box-shadow">
						<h3 class="widget-title">护士 All</h3>
						<div class="table-responsive mb-3">
							<table id="tableId" class="table table-bordered table-striped">
								<thead>
								<tr>
									<th class="no-sort">
										<div class="custom-control custom-checkbox">
											<input class="custom-control-input" type="checkbox" id="select-all">
											<label class="custom-control-label" for="select-all"></label>
										</div>
									</th>
									<th>Number</th>
									<th>Name</th>
									<th>WorkSpace</th>
									<th>WorkDate</th>
									<th>电话</th>
									<th>科室</th>
									<th>工资</th>
									<th>现状</th>
								</tr>
								</thead>
								<tbody>
								<tr th:each="nurse:${nurses}">
									<td>
										<div class="custom-control custom-checkbox">
											<input class="custom-control-input" type="checkbox" th:id="${nurse.id}" name="nurseNum" th:value="${nurse.nurseNum}">
											<label class="custom-control-label" th:for="${nurse.id}"></label>
										</div>
									</td>
									<td th:text="${nurse.nurseNum}"></td>
									<td th:text="${nurse.nurseName}"></td>
									<td th:text="${nurse.nurseWorkspace}"></td>
									<td th:text="${nurse.nurseWorkDate}"></td>
									<td th:text="${nurse.nursePhone}"></td>
									<td th:text="${nurse.nursePosition}"></td>
									<td th:text="${nurse.nurseMoney}"></td>
									<td>
										<span class="badge badge-success"  th:text="${nurse.nurseState}"></span>
									</td>
								</tr>
								</tbody>
							</table>


							<!--Export links-->
<!--							<nav aria-label="Page navigation example">-->
<!--								<ul class="pagination justify-content-center export-pagination">-->
<!--									<li class="page-item">-->
<!--										<a class="page-link" href="#"><span class="ti-download"></span> csv</a>-->
<!--									</li>-->
<!--									<li class="page-item">-->
<!--										<a class="page-link" href="#"><span class="ti-printer"></span>  print</a>-->
<!--									</li>-->
<!--									<li class="page-item">-->
<!--										<a class="page-link" href="#"><span class="ti-file"></span> PDF</a>-->
<!--									</li>-->
<!--									<li class="page-item">-->
<!--										<a class="page-link" href="#"><span class="ti-align-justify"></span> Excel</a>-->
<!--									</li>-->
<!--								</ul>-->
<!--							</nav>-->
							<!-- /Export links-->
							<button type="button" class="btn btn-danger mt-3 mb-0" onclick="delNurse()"><span class="ti-trash"></span> DELETE</button>
							<button type="button" class="btn btn-primary mt-3 mb-0" onclick="openEditModal()"><span class="ti-pencil-alt"></span> EDIT</button>
						</div>
					</div>
				</div>
				<!-- /Widget Item -->
			</div>
		</div>
		<!-- /Main Content -->
		<!--Copy Rights-->
		<div class="container">
			<div class="d-sm-flex justify-content-center">
				<span class="text-muted text-center d-block d-sm-inline-block">Copyright © 2020</span>
			</div>
		</div>
		<!-- /Copy Rights-->
	</div>
	<!-- /Page Content -->
</div>
<!-- Back to Top -->
<a id="back-to-top" href="#" class="back-to-top">
	<span class="ti-angle-up"></span>
</a>
<!-- /Back to Top -->
<!-- Jquery Library-->
<script th:src="@{/js/jquery-3.2.1.min.js}"></script>
<!-- Popper Library-->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap Library-->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Datatable  -->
<script th:src="@{/datatable/jquery.dataTables.min.js}"></script>
<script th:src="@{/datatable/dataTables.bootstrap4.min.js}"></script>

<!-- Custom Script-->
<script th:src="@{/js/custom.js}"></script>
<script th:src="@{/js/custom-datatables.js}"></script>


<script th:inline="javascript">

	/*全选*/
	$("#select-all").click(function(){
		$("input[name='nurseNum']").each(function(){
			if (this.checked) {
				this.checked = false;
			}
			else {
				this.checked = true;
			}
		});
	})

	/*批量删除*/
	function delNurse() {
		var result="";
		var count=0;
		$("input[name='nurseNum']:checked").each(function(){
			if($(this).is(':checked')){
				result+=$(this).attr('value') +",";
				count++;
			}else{}
		});
		if(!confirm("确定删除这"+count+"护士信息?")){
			return;
		}
		console.log(result);
		if(result==",,"){
			alert("删除的信息有误")
		}else{
			window.location.href= "/nurse/deleteNurse?tag="+result;
			alert("删除成功");
			window.location.href = "http://localhost:8080/nurse/nurses";
		}
	}

	/*修改护士的现状*/
	function editNurse() {
		var result="";
		var d = "";
		var nurseState=$("#nurseNowState").val();
		d = $("input[name='nurseNum']:checked").each(function(){;
			result = $(this).attr('value');
		});
		if(nurseState==""){
			alert("请输入要修改的现状")
		}else{
			window.location.href= "/nurse/editNurseNowState?nurseState="+nurseState+"&tag="+result;
			alert("修改成功");
			window.location.href = "http://localhost:8080/nurse/nurses";
		}
	}

	/*打开修改模态框*/
	function openEditModal(editModal) {
		var result="";
		var nurseState="";
		nurseState = $("input[name='nurseNum']:checked").each(function(){
			result = $(this).attr('value');
		});
		if(result==""){
			alert("选择出错")
		}else{
			$("#editModal").modal('show');
		}
	}

</script>
<!--修改模态框-->
<div class="modal fade" id="editModal" data-th-background="static" data-th-keytype="false">
	<div class="modal-dialog">
		<div class="modal-content">
			<!--顶部标题-->
			<div class="modal-header">
				<!--标题-->
				<h5>修改护士现状</h5>
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<!--内容-->
			<div class="modal-body">
				<form id="formEditNurse">
					<input type="text" hidden id="academeIDU">
					<div class="form-group row">
						<label for="nurseNowState"  class="col-3">护士现状 NowState</label>
						<div class="form-group col-md-6">
							<select class="form-control" id="nurseNowState" name="nurseNowState">
								<option>已出诊</option>
								<option>未出诊</option>
								<option>请假</option>
								<option>休假</option>
							</select>
						</div>
					</div>
				</form>
			</div>
			<button type="button" class="btn btn-primary mt-3 mb-0" onclick="editNurse()"><span class="ti-pencil-alt"></span> EDIT</button>
		</div>
	</div>
</div>

</body>
</html>